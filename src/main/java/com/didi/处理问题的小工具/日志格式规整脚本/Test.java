package com.didi.处理问题的小工具.日志格式规整脚本;

/**
 * @author zhenglin
 *  
 * @desc
 * @date 2021/2/7 上午11:14
 */
public class Test {
    public static void main(String[] args) {
        String errorLog;
        errorLog = "Failed to invoke the method getContractGenerateState in the service org.apache.dubbo.rpc.service.GenericService. Tried 1 times of the providers [10.96.101.20:21880] (1/1) from the registry 10.96.238.16:9557 on the consumer 10.190.5.189 using the dubbo version am-2.7.3-3. Last error is: Invoke remote method timeout. method: $invoke, provider: dubbo://10.96.101.20:21880/com.xiaojuchefu.baldur.portal.api.PlaceOrderService?am.degradabletag.provider=tag_035&anyhost=true&application=automarket-nimitz_gw&bean.name=com.xiaojuchefu.baldur.portal.api.PlaceOrderService&callCrimScore.retries=0&callCrimScore.timeout=20000&cancelNoPassProcProtocol.retries=0&cancelNoPassProcProtocol.timeout=20000&check=false&confirmContract.retries=0&confirmContract.timeout=20000&couponInfo.retries=0&couponInfo.timeout=5000&createOrder.retries=0&createOrder.timeout=20000&createOrderPre.retries=0&createOrderPre.timeout=20000&deprecated=false&dubbo=2.0.2&dynamic=true&endpoint_weight=100&environment=test&generic=true&getContractAbstract.retries=0&getContractAbstract.timeout=20000&getContractContent.retries=0&getContractContent.timeout=20000&getContractGenerateState.retries=0&getContractGenerateState.timeout=20000&getCouponList.retries=0&getCouponList.timeout=5000&getFaceApplySessionId.retries=0&getFaceApplySessionId.timeout=20000&getGreatId.retries=0&getGreatId.timeout=20000&getIdentityState.retries=0&getIdentityState.timeout=20000&getMaterialsDetails.retries=0&getMaterialsDetails.timeout=20000&getRiskResult.retries=0&getRiskResult.timeout=20000&getSelectCarPageInfo.retries=3&getSelectCarPageInfo.timeout=10000&getSelectWarehousePageInfo.retries=0&getSelectWarehousePageInfo.timeout=20000&getSignUrl.retries=0&getSignUrl.timeout=20000&getTradeId.retries=0&getTradeId.timeout=20000&getUnPayBill.retries=0&getUnPayBill.timeout=5000&interface=com.xiaojuchefu.baldur.portal.api.PlaceOrderService&label=default&lazy=false&lidc=default&lidc_weight=10&listUnPayBill.retries=0&listUnPayBill.timeout=20000&methods=getIdentityState,submitApplyMaterials,createOrder,getTradeId,getCouponList,getContractGenerateState,callCrimScore,getRiskResult,listUnPayBill,updateApplyMaterials,getSelectWarehousePageInfo,getContractContent,toSelectCar,createOrderPre,signName,couponInfo,getGreatId,getContractAbstract,getMaterialsDetails,signContract,queryConfirmOrderPageInfo,getUnPayBill,getSignUrl,getFaceApplySessionId,getSelectCarPageInfo,queryCarConditionList,confirmContract&odin.su=default.default&owner=xiangxiuhui&pid=28104&queryCarConditionList.retries=3&queryCarConditionList.timeout=3000&queryConfirmOrderPageForPreSell.retries=0&queryConfirmOrderPageForPreSell.timeout=20000&queryConfirmOrderPageInfo.retries=3&queryConfirmOrderPageInfo.timeout=10000&querySignStatus.retries=0&querySignStatus.timeout=20000&register=true&register.ip=10.190.5.189&release=am-2.7.3-2&remote.application=carshare-baldur-portal&revision=1.0.0-SNAPSHOT&service.filter=CustomizeLogDubboProviderFilter&side=consumer&signContract.retries=0&signContract.timeout=20000&signName.retries=0&signName.timeout=20000&signNoPassProcProtocol.retries=0&signNoPassProcProtocol.timeout=20000&sticky=false&submitApplyMaterials.retries=0&submitApplyMaterials.timeout=20000&timeout=40000&timestamp=1612754834733&toSelectCar.retries=0&toSelectCar.timeout=20000&updateApplyMaterials.retries=0&updateApplyMaterials.timeout=20000&version=1.0.0&weight=1000, cause: org.apache.dubbo.remoting.TimeoutException: Waiting server-side response timeout by scan timer. start time: 2021-02-08 16:39:56.441, end time: 2021-02-08 16:40:16.449, client elapsed: 0 ms, server elapsed: 20007 ms, timeout: 20000 ms, request: Request [id=158108, version=2.0.2, twoway=true, event=false, broken=false, data=RpcInvocation [methodName=$invoke, parameterTypes=[class java.lang.String, class [Ljava.lang.String;, class [Ljava.lang.Object;], arguments=[getContractGenerateState, [Ljava.lang.String;@315925b1, [Ljava.lang.Object;@7c71057b], attachments={traceid=ac17f9fc6020f8db0000745bbcca434a, am-did=356616595646247, nq=wifi, am-loc=30.279047428303862,120.04869761674259, am-lang=zh-CN, didi-header-rid=ac17f9fc6020f8db0000745bbcca434a, sw8-correlation=, interface=com.xiaojuchefu.baldur.portal.api.PlaceOrderService, fs=100094, am-nq=wifi, timeout=40000, path=com.xiaojuchefu.baldur.portal.api.PlaceOrderService, sw8=1-NWViZDNmNzZkNmFhNGViMjlkMDkxOTY0MGJjMDFjNjkuOTIuMTYxMjc3MzU5NjQzNjEwOTk=-NWViZDNmNzZkNmFhNGViMjlkMDkxOTY0MGJjMDFjNjkuOTIuMTYxMjc3MzU5NjQzNjEwOTg=-1-WW91cl9BcHBsaWNhdGlvbk5hbWU=-MmQ0YjA4Mzc1NWVjNDMxNjk0OTA2OWUyMDMyY2RkMjhAMTAuMTkwLjUuMTg5-L2JhbGR1ci9hcGkvcGxhY2VPcmRlci9nZXRDb250cmFjdEdlbmVyYXRlU3RhdGU=-MTAuOTYuMTAxLjIwOjIxODgw, cspanid=008c0519b932629f, kylin_api_name=gw_tests, host=gw-test.intra.xiaojukeji.com, connection=keep-alive, net=wifi, lang=zh-CN, dinfo=dipper@android@1080*2029, am-net=wifi, x-forwarded-proto=http, ticket=0LJ-2Il73qUghpiIVlUVlor6UqAbjiRI3l-JpT5WqOUkzLltw0AQheFe_nhAvNmDw53UuXvwQVtKVoAERQR7V6AGvoMpkrpoEcZ00o1ZyCYpjFlJjz6qh-paQ5sxGyljdpKPT4wvEoxv0r33TaFWhvceJYxfcjN28uBxe95_9rc9TuOP9NVLGyXWMP5JJHmXDy-BcSFxjCup8xUAAP__, am-dinfo=MI 8@10@1080*2029, didi-header-hint-code=0, x-forwarded-for=172.23.234.84, env=tag_035, gateway_method=GET, ttid=100094@xjcf_android_2.1.4, version=1.0.0, generic=true, x-real-ip=172.23.234.84, am-ttid=0@xjcf_android_2.1.4, am-cityid=5, wsgsig=dd04-ScppV8IH3jhfitLo52Lt7jJpbhaF7YUWKkiBWIJdkqSkga51yq1dcpotIEU/SgAN3uxmbifVMBPEmZm4guoQ/e+qO2FMYPsB28m++f0nPXTNZPsab2G3jxzSDAyc+SnRt/YFF72fGFAY129n1QVibborIVdjRWm7FRMn/lcNlXZgYPPa3RalNsouKgwiSfa1fv6p+e8/JUkT, t=1612773595, sw8-x=0, gateway_host=gw-test.intra.xiaojukeji.com, am.degradabletag.consumer=tag_035, didi-header-spanid=008c0519b932629f, gateway_path=/baldur/api/placeOrder/getContractGenerateState, did=356616595646247, am-t=1612773595, accept-encoding=gzip, user-agent=Android/10 didihttp OneNet/2.1.1.0 com.xiaojukeji.xiaojuchefu/2.1.4}]], channel: /10.190.5.189:54138 -> /10.96.101.20:21880";
        String result = errorLog.replaceAll("\\./", "./\n")
                .replaceAll("&", "\n&")
                .replaceAll("\\. ", ".\n")
                .replaceAll(", ", ",\n")
                .replace("?", "?\n");
        System.out.println(result);
    }
}
